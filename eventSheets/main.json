{
	"name": "Main",
	"events": [
		{
			"eventType": "variable",
			"name": "TILESIZE",
			"type": "number",
			"initialValue": "32",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 867306961513805
		},
		{
			"eventType": "variable",
			"name": "PLAYER_COUNT",
			"type": "number",
			"initialValue": "2",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 958909587890093
		},
		{
			"eventType": "include",
			"includeSheet": "Player"
		},
		{
			"eventType": "include",
			"includeSheet": "Enemy"
		},
		{
			"eventType": "include",
			"includeSheet": "Items"
		},
		{
			"eventType": "include",
			"includeSheet": "Menu"
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "ZOrder",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 897112964195639
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "ZOrder",
							"sid": 977587177824666,
							"parameters": {
								"instance-variable": "zOrder",
								"value": "Self.Y"
							}
						},
						{
							"id": "sort-z-order",
							"objectClass": "System",
							"sid": 970540416480124,
							"parameters": {
								"object": "ZOrder",
								"instance-variable": {
									"name": "zOrder",
									"objectClass": "ZOrder"
								}
							}
						}
					],
					"sid": 480972026873685
				}
			],
			"sid": 215496818805391
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Battle",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Check for Auto Battles"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 483978101402004
						}
					],
					"actions": [
						{
							"callFunction": "checkBattle",
							"sid": 256900782701434,
							"parameters": [
								"1"
							]
						}
					],
					"sid": 941082219395973,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 654001758641715,
									"parameters": {
										"variable": "PLAYER_COUNT",
										"comparison": 0,
										"value": "2"
									}
								}
							],
							"actions": [
								{
									"callFunction": "checkBattle",
									"sid": 791504457072419,
									"parameters": [
										"2"
									]
								}
							],
							"sid": 494170449227943
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Flash Enemy/Player when hit"
				},
				{
					"functionName": "flash",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "targetUID",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 714395251056764
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "ZOrder",
							"sid": 354638376968130,
							"parameters": {
								"unique-id": "targetUID"
							}
						}
					],
					"actions": [
						{
							"id": "stop-tweens",
							"objectClass": "ZOrder",
							"sid": 454558674147622,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"Flash\""
							}
						},
						{
							"id": "tween-value",
							"objectClass": "ZOrder",
							"sid": 751221157350580,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"Flash\"",
								"start-value": "200",
								"end-value": "100",
								"time": "0.25",
								"ease": "default",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no"
							}
						}
					],
					"sid": 571055638338177
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-playing",
							"objectClass": "ZOrder",
							"sid": 447211268547041,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"Flash\""
							}
						}
					],
					"actions": [
						{
							"id": "set-effect-parameter",
							"objectClass": "ZOrder",
							"sid": 702508686914537,
							"parameters": {
								"effect": "\"AdjustHSL\"",
								"parameter-index": "2",
								"value": "Self.Tween.Value(\"Flash\")"
							}
						}
					],
					"sid": 463458330138085
				},
				{
					"eventType": "comment",
					"text": "Checks if there is an ongoing battle"
				},
				{
					"functionName": "checkBattle",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "playerNr",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 144319265543412
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 213151217486372,
							"parameters": {
								"object": "Players",
								"expression": "Players.playerNr",
								"comparison": 0,
								"value": "playerNr"
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "Players",
							"sid": 440932486220320,
							"parameters": {
								"instance-variable": "battle"
							}
						}
					],
					"actions": [
						{
							"callFunction": "checkHelath",
							"sid": 791431493250250,
							"parameters": [
								"Players.playerNr"
							]
						}
					],
					"sid": 225603915220654,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "Players",
									"sid": 417896444363156,
									"parameters": {
										"instance-variable": "battle"
									}
								},
								{
									"id": "is-timer-running",
									"objectClass": "game_manager",
									"sid": 973615734477333,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "Players.cooldownName"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"callFunction": "playerAttack",
									"sid": 872315630377805,
									"parameters": [
										"Players.playerNr"
									]
								}
							],
							"sid": 905403194815684
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "Players",
									"sid": 461114572519288,
									"parameters": {
										"instance-variable": "battle"
									}
								},
								{
									"id": "is-timer-running",
									"objectClass": "game_manager",
									"sid": 592984717902740,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "Players.cooldownNameEnemy"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"callFunction": "enemyAttack",
									"sid": 381514873780494,
									"parameters": [
										"Players.playerNr"
									]
								}
							],
							"sid": 507463656801343
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Checks if someone has < 0 health"
				},
				{
					"functionName": "checkHelath",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "playerNr",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 186856910512681
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 908216877671847,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 534642005044635,
									"parameters": {
										"object": "Players",
										"expression": "Players.playerNr",
										"comparison": 0,
										"value": "playerNr"
									}
								}
							],
							"actions": [
								{
									"callFunction": "updateHealthbar",
									"sid": 498456890525057,
									"parameters": [
										"playerNr"
									]
								}
							],
							"sid": 268638077407237,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "Players",
											"sid": 265963292893085,
											"parameters": {
												"instance-variable": "currentHealth",
												"comparison": 3,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "Players",
											"sid": 204883523951664,
											"parameters": {
												"instance-variable": "battle",
												"value": "false"
											}
										},
										{
											"id": "destroy",
											"objectClass": "Players",
											"sid": 501650842918813
										}
									],
									"sid": 214555413941783,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-unique-id",
													"objectClass": "Enemies",
													"sid": 152275005582872,
													"parameters": {
														"unique-id": "Players.lastTargetUID"
													}
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "Enemies",
													"sid": 373395988966015,
													"parameters": {
														"instance-variable": "currentTargetUID",
														"value": "0"
													}
												}
											],
											"sid": 424252988273055
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-unique-id",
											"objectClass": "Enemies",
											"sid": 877705187563016,
											"parameters": {
												"unique-id": "Players.lastTargetUID"
											}
										}
									],
									"actions": [],
									"sid": 234174800936429,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "Enemies",
													"sid": 856644460506389,
													"parameters": {
														"instance-variable": "currentHealth",
														"comparison": 3,
														"value": "0"
													}
												}
											],
											"actions": [
												{
													"id": "destroy",
													"objectClass": "Enemies",
													"sid": 103263388870118
												},
												{
													"id": "set-boolean-instvar",
													"objectClass": "Players",
													"sid": 191812955142409,
													"parameters": {
														"instance-variable": "battle",
														"value": "false"
													}
												}
											],
											"sid": 780616333363066
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 450538263979290
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "When no enemy with UID is found, set battle to false -> important, if more than 1 player is fighting an enemy"
										},
										{
											"id": "set-boolean-instvar",
											"objectClass": "Players",
											"sid": 885019006769084,
											"parameters": {
												"instance-variable": "battle",
												"value": "false"
											}
										}
									],
									"sid": 557626293309976
								}
							]
						}
					]
				}
			],
			"sid": 198300338258190
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Data",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 522699190421348
						}
					],
					"actions": [
						{
							"id": "request-project-file",
							"objectClass": "AJAX",
							"sid": 772705126013084,
							"parameters": {
								"tag": "\"dctClasses\"",
								"file": "dctClasses.json"
							}
						}
					],
					"sid": 580455505702337
				},
				{
					"eventType": "comment",
					"text": "Load dctClasses.json data to dictionary."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-completed",
							"objectClass": "AJAX",
							"sid": 871836501223109,
							"parameters": {
								"tag": "\"dctClasses\""
							}
						}
					],
					"actions": [
						{
							"id": "load",
							"objectClass": "dctClasses",
							"sid": 443109951614564,
							"parameters": {
								"json": "AJAX.LastData"
							}
						},
						{
							"id": "set-text",
							"objectClass": "txtDebug",
							"sid": 154322830492202,
							"parameters": {
								"text": "dctClasses.Get(\"0\")"
							}
						}
					],
					"sid": 317295321038539
				}
			],
			"sid": 714684142029588
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Debug",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 733905867765955
						},
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 271805883421274,
							"parameters": {
								"object": "Players",
								"expression": "Players.playerNr",
								"comparison": 0,
								"value": "1"
							}
						}
					],
					"actions": [
						{
							"id": "set-text",
							"objectClass": "txtDebug",
							"sid": 287242338195846,
							"parameters": {
								"text": "round(cos(Players.angleOfMotion + 180)) * -1"
							}
						}
					],
					"sid": 697578855527168
				}
			],
			"sid": 429926777181533
		}
	],
	"sid": 678814153959917
}